<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Queentana Real â€” Tienda</title>
  <style>
    :root{
      /* Ajusta estos colores a los de tu logo */
      --bg:#F9F6F0; /* fondo */
      --text:#1F1F1F; /* texto */
      --accent:#C69B3E; /* dorado/real */
      --muted:#8b8172;
      --card:#fff;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text); margin:0; padding:0}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 20px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:56px;height:56px;object-fit:contain;border-radius:10px}
    .brand h1{font-size:20px;margin:0;line-height:1}
    .brand span{display:block;font-size:12px;color:var(--muted)}

    /* Menu boton esquina */
    .menu-btn{background:transparent;border:1px solid transparent;padding:8px;border-radius:10px;cursor:pointer}
    .menu{position:fixed;top:18px;left:18px;padding:10px;background:var(--card);box-shadow:0 6px 18px rgba(31,31,31,0.08);border-radius:10px}

    /* Carrito */
    .cart-btn{position:fixed;right:18px;top:18px;background:linear-gradient(180deg,var(--accent),#b5792f);color:white;border:none;padding:10px 12px;border-radius:12px;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.12)}
    .cart-count{background:#fff;color:var(--text);padding:2px 8px;border-radius:999px;font-weight:600;margin-left:8px}
    .cart-panel{position:fixed;right:18px;top:64px;width:320px;max-height:70vh;overflow:auto;background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.12);display:none}
    .cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(0,0,0,0.06)}
    .cart-item button{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:6px;border-radius:8px;cursor:pointer}

    main{padding:18px;max-width:1100px;margin:0 auto}
    .welcome{display:grid;grid-template-columns:1fr 360px;gap:18px;align-items:center;margin-bottom:18px}
    .hero{background:linear-gradient(180deg, rgba(198,155,62,0.08), transparent);padding:22px;border-radius:14px}
    .hero h2{margin:0;font-size:28px}
    .hero p{margin:8px 0 0;color:var(--muted)}

    .socials{display:flex;flex-direction:column;gap:8px;padding:14px;background:var(--glass);border-radius:12px}
    .socials a{display:flex;align-items:center;gap:8px;text-decoration:none;color:var(--text);font-weight:600}

    /* Productos */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 6px 20px rgba(31,31,31,0.06);display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .card h3{margin:0;font-size:16px}
    .price{font-weight:700;color:var(--accent)}
    .btn{background:var(--accent);color:white;padding:8px;border-radius:10px;border:none;cursor:pointer}

    /* Modal */
    .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{background:var(--card);width:100%;max-width:560px;border-radius:12px;padding:16px;box-shadow:0 10px 40px rgba(0,0,0,0.18)}
    .options{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .option{padding:8px 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);cursor:pointer}
    .option.active{background:var(--accent);color:white;border:none}

    .total-box{position:relative;padding:10px;border-radius:10px;border:1px dashed rgba(0,0,0,0.06);display:flex;justify-content:space-between;align-items:center;margin-top:12px}

    footer{padding:20px;text-align:center;color:var(--muted)}

    /* Responsive tweaks */
    @media(max-width:720px){
      .welcome{grid-template-columns:1fr}
      .brand img{width:48px;height:48px}
      .cart-panel{width:92vw}
    }
  </style>
</head>
<body>
  <!-- Menu (esquina) -->
  <div class="menu" style="right:18px;left:auto;top:18px;position:fixed;">
    <button class="menu-btn" id="openMenu">â˜° MenÃº</button>
  </div>

  <!-- Carrito botÃ³n + panel -->
  <button class="cart-btn" id="openCart">ðŸ›’ Carrito <span class="cart-count" id="cartCount">0</span></button>
  <div class="cart-panel" id="cartPanel">
    <h3>Tu pedido</h3>
    <div id="cartItems"></div>
    <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
      <strong>Total:</strong>
      <strong id="cartTotal">$0</strong>
    </div>
    <button class="btn" style="width:100%;margin-top:12px" id="checkoutBtn">Continuar a pagar</button>
  </div>

  <header>
    <div class="brand">
      <!-- Reemplaza src por la ruta de tu logo que subas a /assets/logo.png -->
      <img src="assets/logo.png" alt="Queentana Real logo" id="logoImg">
      <div>
        <h1>Queentana Real</h1>
        <span>ReposterÃ­a elegante y con alma</span>
      </div>
    </div>
  </header>

  <main>
    <section class="welcome">
      <div class="hero">
        <h2>Â¡Bienvenid@ a Queentana Real!</h2>
        <p>Postres caseros, cariÃ±o real y sabores que coronan cualquier dÃ­a. Explora, elige y encarga en segundos.</p>
      </div>

      <aside class="socials">
        <a href="#" id="igLink">Instagram â€¢ @queentana_real</a>
        <a href="#" id="fbLink">Facebook â€¢ Queentana Real</a>
        <a href="#" id="ttLink">TikTok â€¢ @queentana_real</a>
      </aside>
    </section>

    <section>
      <h3>Nuestros productos</h3>
      <div class="grid" id="productsGrid">
        <!-- Cards inyectadas por JS -->
      </div>

      <h4 style="margin-top:18px">PrÃ³ximamente</h4>
      <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(160px,1fr));margin-top:8px">
        <div class="card"><h3>Cupcakes</h3><p>Muy pronto</p></div>
        <div class="card"><h3>Galletas</h3><p>Muy pronto</p></div>
        <div class="card"><h3>Empanadas</h3><p>Muy pronto</p></div>
        <div class="card"><h3>Macaron</h3><p>Muy pronto</p></div>
        <div class="card"><h3>Accesorios</h3><p>Muy pronto</p></div>
      </div>
    </section>
  </main>

  <!-- Modal producto -->
  <div class="modal-back" id="modalBack">
    <div class="modal" role="dialog" aria-modal="true" id="productModal">
      <button id="closeModal" style="float:right;background:transparent;border:0;font-size:18px;cursor:pointer">âœ•</button>
      <h3 id="modalTitle">Producto</h3>
      <p id="modalDesc"></p>
      <div id="modalOptions"></div>

      <div class="total-box">
        <div>
          <div style="font-size:12px;color:var(--muted)">Total actual</div>
          <div style="font-weight:800;font-size:18px" id="modalTotal">$0</div>
        </div>
        <div>
          <label>Cantidad</label>
          <input type="number" id="modalQty" value="1" min="1" style="width:72px;margin-left:8px;padding:6px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)">
        </div>
      </div>

      <div style="display:flex;gap:8px;margin-top:12px">
        <button class="btn" id="addToCartBtn">Agregar al carrito</button>
        <button id="cancelBtn" style="background:transparent;border:1px solid rgba(0,0,0,0.06);padding:8px;border-radius:8px;cursor:pointer">Cancelar</button>
      </div>
    </div>
  </div>

  <footer>
    <small>Queentana Real â€¢ Hecho con cariÃ±o</small>
  </footer>

  <script>
    // Datos iniciales de productos (ajusta imÃ¡genes y textos segÃºn tengas)
    const PRODUCTS = [
      {
        id:'carlota',
        name:'Carlota(s)',
        price:30,
        desc:'Carlota clÃ¡sica. Selecciona si quieres con topping.',
        img:'assets/carlota.jpg',
        type:'carlota'
      },
      {
        id:'gelatina',
        name:'Gelatina',
        price:12,
        desc:'Elige tamaÃ±o y sabor.',
        img:'assets/gelatina.jpg',
        type:'gelatina'
      }
    ];

    // Toppings y opciones
    const TOPPINGS = ['Fresa','Mango','Nuez','Mazapan','Chispas payaso','Chispas de chocolate','Cacahuate'];
    const GELATINA_SIZES = [ {key:'chica',label:'Chica',price:12},{key:'mediana',label:'Mediana',price:20} ];
    const GELATINA_FLAVORS = ['Fresa','LimÃ³n','Uva','Naranja','PiÃ±a'];

    // Estado del carrito
    let cart = JSON.parse(localStorage.getItem('qr_cart')||'[]');

    const productsGrid = document.getElementById('productsGrid');
    const cartCount = document.getElementById('cartCount');
    const cartPanel = document.getElementById('cartPanel');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');

    function renderProducts(){
      productsGrid.innerHTML = '';
      PRODUCTS.forEach(p=>{
        const card = document.createElement('div');card.className='card';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}" onerror="this.src='assets/placeholder.png'">
          <h3>${p.name}</h3>
          <div style='display:flex;justify-content:space-between;align-items:center'>
            <div class='price'>$${p.price}</div>
            <button class='btn' data-id='${p.id}'>Ver</button>
          </div>`;
        productsGrid.appendChild(card);
      });
    }

    // Modal handling
    const modalBack = document.getElementById('modalBack');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalOptions = document.getElementById('modalOptions');
    const modalTotal = document.getElementById('modalTotal');
    const modalQty = document.getElementById('modalQty');
    const addToCartBtn = document.getElementById('addToCartBtn');

    let currentProduct = null;
    let currentVariant = {};

    document.addEventListener('click', (e)=>{
      if(e.target.matches('.btn[data-id]')){
        const id = e.target.getAttribute('data-id');
        openProduct(id);
      }
    });

    function openProduct(id){
      const p = PRODUCTS.find(x=>x.id===id);
      currentProduct = p;
      modalTitle.textContent = p.name;
      modalDesc.textContent = p.desc;
      modalQty.value = 1;
      currentVariant = {};
      modalOptions.innerHTML = '';

      if(p.type==='carlota'){
        // Mostrar toggle para con topping
        const wrapper = document.createElement('div');
        wrapper.innerHTML = `<div style='margin-top:8px'><strong>Â¿Con topping?</strong></div>`;
        const yes = document.createElement('button'); yes.className='option'; yes.textContent='Si';
        const no = document.createElement('button'); no.className='option active'; no.textContent='No';
        const toppingsDiv = document.createElement('div'); toppingsDiv.style.marginTop='8px';
        toppingsDiv.style.display='none';

        yes.addEventListener('click',()=>{ yes.classList.add('active'); no.classList.remove('active'); toppingsDiv.style.display='flex'; currentVariant.withTopping=true; updateModalTotal(); });
        no.addEventListener('click',()=>{ no.classList.add('active'); yes.classList.remove('active'); toppingsDiv.style.display='none'; currentVariant.withTopping=false; currentVariant.topping=null; updateModalTotal(); });

        // toppings list
        const toppingsList = document.createElement('div'); toppingsList.className='options';
        TOPPINGS.forEach(t=>{
          const b = document.createElement('button'); b.className='option'; b.textContent=t;
          b.addEventListener('click',()=>{ document.querySelectorAll('#modalOptions .option.selected-topping')?.forEach(x=>x.classList.remove('selected-topping')); b.classList.add('selected-topping'); currentVariant.topping=t; updateModalTotal(); });
          toppingsList.appendChild(b);
        });
        toppingsDiv.appendChild(toppingsList);
        wrapper.appendChild(yes); wrapper.appendChild(no); wrapper.appendChild(toppingsDiv);
        modalOptions.appendChild(wrapper);
        // Set default
        currentVariant.withTopping=false;
      }

      if(p.type==='gelatina'){
        // TamaÃ±o
        const sizeTitle = document.createElement('div'); sizeTitle.style.marginTop='8px'; sizeTitle.innerHTML='<strong>TamaÃ±o</strong>';
        const sizeBox = document.createElement('div'); sizeBox.className='options';
        GELATINA_SIZES.forEach(s=>{
          const b = document.createElement('button'); b.className='option'; b.textContent=`${s.label} ($${s.price})`;
          b.addEventListener('click',()=>{ document.querySelectorAll('#modalOptions .option.size')?.forEach(x=>x.classList.remove('active')); b.classList.add('active'); currentVariant.size=s; updateModalTotal(); });
          b.classList.add('size'); sizeBox.appendChild(b);
        });
        modalOptions.appendChild(sizeTitle); modalOptions.appendChild(sizeBox);

        // Sabor
        const flavorTitle = document.createElement('div'); flavorTitle.style.marginTop='8px'; flavorTitle.innerHTML='<strong>Sabor</strong>';
        const flavorBox = document.createElement('div'); flavorBox.className='options';
        GELATINA_FLAVORS.forEach(f=>{
          const b = document.createElement('button'); b.className='option'; b.textContent=f;
          b.addEventListener('click',()=>{ document.querySelectorAll('#modalOptions .option.flavor')?.forEach(x=>x.classList.remove('active')); b.classList.add('active'); currentVariant.flavor=f; });
          b.classList.add('flavor'); flavorBox.appendChild(b);
        });
        modalOptions.appendChild(flavorTitle); modalOptions.appendChild(flavorBox);

        currentVariant.size = null; currentVariant.flavor = null;
      }

      updateModalTotal();
      modalBack.style.display='flex';
    }

    function updateModalTotal(){
      if(!currentProduct) return;
      let base = currentProduct.price;
      if(currentProduct.type==='carlota'){
        if(currentVariant.withTopping) base = 35; // especificado
      }
      if(currentProduct.type==='gelatina'){
        if(currentVariant.size) base = currentVariant.size.price; else base = 12;
      }
      const qty = Number(modalQty.value)||1;
      modalTotal.textContent = `$${base*qty}`;
    }

    modalQty.addEventListener('input',updateModalTotal);

    document.getElementById('closeModal').addEventListener('click',()=>{ modalBack.style.display='none'; });
    document.getElementById('cancelBtn').addEventListener('click',()=>{ modalBack.style.display='none'; });

    addToCartBtn.addEventListener('click',()=>{
      const qty = Number(modalQty.value)||1;
      // Validaciones para gelatina
      if(currentProduct.type==='gelatina'){
        if(!currentVariant.size){ alert('Selecciona el tamaÃ±o de la gelatina'); return; }
        if(!currentVariant.flavor){ alert('Selecciona el sabor'); return; }
      }
      if(currentProduct.type==='carlota'){
        // if topping required? not required; default no
      }

      const item = {
        id: currentProduct.id + '_' + Math.random().toString(36).slice(2,7),
        prodId: currentProduct.id,
        name: currentProduct.name,
        price: (currentProduct.type==='carlota' && currentVariant.withTopping)?35: (currentProduct.type==='gelatina'?currentVariant.size.price:currentProduct.price),
        qty,
        meta: JSON.parse(JSON.stringify(currentVariant))
      };
      cart.push(item); saveCart(); renderCart(); modalBack.style.display='none';
    });

    function saveCart(){ localStorage.setItem('qr_cart', JSON.stringify(cart)); }

    function renderCart(){
      cartItems.innerHTML='';
      let total=0; cart.forEach(ci=>{
        total += ci.price*ci.qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `<div>
            <div style='font-weight:700'>${ci.name}</div>
            <div style='font-size:13px;color:var(--muted)'>${formatMeta(ci.meta)}</div>
            <div style='font-size:13px;color:var(--muted)'>${ci.qty} x $${ci.price}</div>
          </div>
          <div>
            <button data-remove='${ci.id}'>Eliminar</button>
          </div>`;
        cartItems.appendChild(div);
      });
      cartTotal.textContent = `$${total}`;
      cartCount.textContent = cart.reduce((s,i)=>s+i.qty,0);
    }

    function formatMeta(meta){
      if(!meta) return '';
      if(meta.withTopping!==undefined) return meta.withTopping ? `Topping: ${meta.topping||'--'}` : 'Sin topping';
      if(meta.size) return `${meta.size.label} â€¢ ${meta.flavor||''}`;
      return '';
    }

    // eliminar item
    cartItems.addEventListener('click',(e)=>{
      const id = e.target.getAttribute('data-remove');
      if(!id) return;
      cart = cart.filter(i=>i.id!==id); saveCart(); renderCart();
    });

    // abrir/cerrar carrito
    document.getElementById('openCart').addEventListener('click',()=>{ cartPanel.style.display = cartPanel.style.display==='block'?'none':'block'; renderCart(); });

    // iniciar
    renderProducts(); renderCart();

    // Abrir menu simple (puedes extender)
    document.getElementById('openMenu').addEventListener('click',()=>{
      alert('MenÃº:\n- Inicio\n- Productos\n- Contacto\n- Sobre nosotros');
    });

    // Social links (reemplaza hrefs con tus urls reales)
    document.getElementById('igLink').href = 'https://instagram.com/queentana_real';
    document.getElementById('fbLink').href = 'https://facebook.com/QueentanaReal';
    document.getElementById('ttLink').href = 'https://tiktok.com/@queentana_real';

    // Checkout (simulaciÃ³n)
    document.getElementById('checkoutBtn').addEventListener('click',()=>{
      if(cart.length===0){ alert('Tu carrito estÃ¡ vacÃ­o'); return; }
      alert('SimulaciÃ³n: ir a pago. AquÃ­ puedes integrar pasarela y formulario de envÃ­o.');
    });

    // Close modal if click outside
    modalBack.addEventListener('click',(e)=>{ if(e.target===modalBack) modalBack.style.display='none'; });

  </script>
</body>
</html>
